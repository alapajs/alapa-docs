---
sidebar_position: 4
---

# Resourceful Routing

Alapa supports resourceful routing, which maps common CRUD operations to routes:

| Verb      | URL              | Method  | Route Name    |
| --------- | ---------------- | ------- | ------------- |
| GET       | books            | index   | books.index   |
| GET       | books/create     | create  | books.create  |
| POST      | books            | store   | books.store   |
| GET       | books/:book      | show    | books.show    |
| GET       | books/:book/edit | edit    | books.edit    |
| PUT/PATCH | books/:book      | update  | books.update  |
| DELETE    | books/:book      | destroy | books.destroy |

Define your controller class and include methods for each resourceful operation:

```ts
import { ResourcefulController, Request, Response } from "alapa";

export class BookController implements ResourcefulController {
  async index(req: Request, res: Response) {
    const books = await Books.find();
    res.render("books.index", { books });
  }

  async show(req: Request, res: Response) {
    const book = await Books.findOneBy({ id: req.params.book });
    res.render("books.show", { book });
  }

  create(req: Request, res: Response) {
    res.render("books.create");
  }

  async store(req: Request, res: Response) {
    const book = new Books();
    book.title = req.body.title;
    book.author = req.body.author;
    book.year = req.body.year;
    book.description = req.body.description;
    await book.save();
    res.flash("success", "Book created successfully");
    res.redirect("/books");
  }

  async edit(req: Request, res: Response) {
    const book = await Books.findOneBy({ id: req.params.book });
    res.render("books.edit", { book });
  }

  async update(req: Request, res: Response) {
    const book = await Books.findOneBy({ id: req.params.book });
    if (book) {
      book.title = req.body.title;
      book.author = req.body.author;
      book.year = req.body.year;
      book.description = req.body.description;
      await book.save();
      res.flash("success", "Book updated successfully");
    } else {
      res.flash("error", "Book not found");
    }
    res.redirect(`/books/${book.id}/edit`);
  }

  async destroy(req: Request, res: Response) {
    const book = await Books.findOneBy({ id: req.params.book });
    if (book) {
      book.destroy();
      res.flash("success", "Book deleted successfully");
    } else {
      res.flash("error", "Book not found");
    }
    res.redirect("/books");
  }
}
```

Register the resourceful route:

```ts
import { Router } from "alapa";
import { BookController } from "./books/controller";

const routes = new Router();
routes.resource("/books", BookController);

export default routes;
```
